import fragment
import pathlib

from PIL import Image, ImageDraw


def generate_bars(width: int, height: int) -> list[Image.Image]:
    result: list[Image.Image] = []

    width_range = range(0, width+1)

    for i in width_range:
        image = Image.new("RGB", (width, height))
        draw = ImageDraw.Draw(image, "RGB")
        draw.rectangle((0, 0, width, height), (153, 153, 153))
        draw.rectangle((0, 0, i, height), (255, 255, 255))

        result.append(image)

    return result


def main():
    root = pathlib.Path(fragment.get_project_root())
    temp = root.joinpath("temp/")
    temp.mkdir(parents=True, exist_ok=True)

    bars = generate_bars(512, 16)
    for bar in range(len(bars)):
        _bar = bars[bar]
        _fp = temp.joinpath("bars/")
        _fp.mkdir(parents=True, exist_ok=True)
        _fp = _fp.joinpath(f"{bar}.png")
        with open(_fp, "wb") as file:
            _bar.save(file)


if __name__ == "__main__":
    main()
